{
  "user_profile_tool": {
    "parameters": {
      "toolDescription": "Get user profile (optimized)",
      "method": "GET",
      "url": "https://portal-innovacion-gttd.vercel.app/api/user/profile",
      "authentication": "none",
      "sendHeaders": true,
      "headerParameters": {
        "parameters": [
          {
            "name": "Authorization",
            "value": "={{ $json.body.user.auth_token}}"
          },
          {
            "name": "Cache-Control", 
            "value": "max-age=300"
          },
          {
            "name": "Accept",
            "value": "application/json"
          }
        ]
      },
      "options": {
        "timeout": 5000,
        "redirect": "follow",
        "decompress": true,
        "followRedirect": true,
        "maxRedirects": 3
      }
    }
  },
  "dynamic_postgres_tool": {
    "parameters": {
      "descriptionType": "manual",
      "toolDescription": "Execute optimized session queries only",
      "resource": "database",
      "operation": "executeQuery", 
      "query": "{{ $fromAI(\"query\", \"Use ONLY these exact patterns: 1) SELECT session_id, user_id, current_stage, conversation_data, completeness_score, status FROM session_states WHERE user_id = $1 AND status = 'active' ORDER BY updated_at DESC LIMIT 1; 2) INSERT INTO session_states (user_id, current_stage, conversation_data, completeness_score, status) VALUES ($1, 'start', '{}', 0, 'active') RETURNING session_id, user_id, current_stage, conversation_data, completeness_score, status;\") }}",
      "options": {
        "queryTimeout": 3000,
        "connectionLimit": 1,
        "useSSL": false,
        "allowExitOnIdle": true
      }
    }
  },
  "agent_configuration": {
    "max_iterations": 1,
    "early_stopping_method": "force",
    "tools_execution": "sequential",
    "response_format": "structured_only",
    "llm_settings": {
      "temperature": 0.1,
      "max_tokens": 500,
      "stop_sequences": ["}"],
      "response_format": "json_object"
    }
  }
}
